<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeBridge - Your Daily Health Companion</title>
    <style>
        /* ELDERLY-FIRST DESIGN SYSTEM */
        
        /* Base Typography - Optimized for 65+ users */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Helvetica', sans-serif; /* High readability fonts */
            font-size: 28px; /* 28px minimum for elderly users */
            font-weight: 600; /* Semi-bold for better visibility */
            line-height: 1.8; /* Generous line spacing */
            letter-spacing: 0.1em; /* Character clarity */
            color: #000000; /* Pure black for maximum contrast */
            background-color: #ffffff; /* Pure white background */
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        /* Header Typography */
        h1 {
            font-size: 56px; /* Extra large for critical headers */
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
        }
        
        h2 {
            font-size: 48px; /* Large headers */
            font-weight: 600;
            margin-bottom: 25px;
        }
        
        h3 {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        /* Container and Layout */
        .app-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* BUTTON SYSTEM - Elderly Optimized */
        .btn {
            display: inline-block;
            padding: 25px 40px; /* Generous padding */
            margin: 15px 10px;
            font-size: 32px; /* Large button text */
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            min-width: 200px;
            min-height: 80px; /* 80px minimum touch target */
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        /* Primary Action Button */
        .btn-primary {
            background-color: #4f46e5; /* HomeBridge blue */
            color: #ffffff;
            font-size: 36px;
            min-width: 300px;
            min-height: 120px; /* Extra large for primary actions */
        }
        
        .btn-primary:hover, .btn-primary:focus {
            background-color: #3730a3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.3);
        }
        
        /* Emergency Button */
        .btn-emergency {
            background-color: #cc0000;
            color: #ffffff;
            font-size: 32px;
            min-width: 250px;
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
        }
        
        .btn-emergency:hover {
            background-color: #990000;
        }
        
        /* Secondary Buttons */
        .btn-secondary {
            background-color: #f5f5f5;
            color: #000000;
            border: 3px solid #cccccc;
        }
        
        .btn-secondary:hover {
            background-color: #eeeeee;
            border-color: #999999;
        }
        
        /* Success/Positive Button */
        .btn-success {
            background-color: #00aa00;
            color: #ffffff;
        }
        
        /* Voice Interface Styles */
        .voice-container {
            text-align: center;
            padding: 40px;
            margin: 30px 0;
        }
        
        .microphone-btn {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background-color: #4f46e5;
            color: white;
            font-size: 48px;
            border: none;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }
        
        .microphone-btn:hover {
            background-color: #3730a3;
            transform: scale(1.05);
        }
        
        .microphone-btn.listening {
            background-color: #cc0000;
            animation: pulse 1.5s infinite;
        }
        
        .microphone-btn.processing {
            background-color: #ff6600;
            animation: spin 2s linear infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Health Check Interface */
        .health-scale {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .scale-item {
            width: 80px;
            height: 80px;
            border: 3px solid #cccccc;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.2s ease;
        }
        
        .scale-item:hover, .scale-item.selected {
            border-color: #4f46e5;
            background-color: #e6f3ff;
            transform: scale(1.1);
        }
        
        /* Mood Selection */
        .mood-selection {
            display: flex;
            justify-content: space-around;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .mood-btn {
            width: 120px;
            height: 120px;
            font-size: 48px;
            border: 3px solid #cccccc;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            margin: 15px;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .mood-btn:hover, .mood-btn.selected {
            border-color: #4f46e5;
            background-color: #e6f3ff;
            transform: scale(1.1);
        }
        
        .mood-label {
            font-size: 18px;
            margin-top: 8px;
            font-weight: 600;
        }
        
        /* Family Section */
        .family-section {
            background-color: #f8f9ff;
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            border: 2px solid #e6f3ff;
        }
        
        .family-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 20px auto;
            display: block;
            border: 4px solid #4f46e5;
        }
        
        .family-message {
            text-align: center;
            font-size: 28px;
            margin: 20px 0;
            color: #333333;
        }
        
        /* Status Indicators */
        .status-section {
            background-color: #f0f9ff;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 6px solid #4f46e5;
        }
        
        .status-item {
            font-size: 24px;
            margin: 15px 0;
            display: flex;
            align-items: center;
        }
        
        .status-icon {
            font-size: 32px;
            margin-right: 15px;
        }
        
        /* Navigation */
        .nav-section {
            text-align: center;
            margin: 40px 0;
            padding: 20px 0;
            border-top: 3px solid #eeeeee;
        }
        
        .back-btn {
            background-color: #f5f5f5;
            color: #000000;
            border: 2px solid #cccccc;
            font-size: 28px;
            padding: 20px 30px;
            margin: 10px;
            min-width: 150px;
        }
        
        /* Conversation Interface */
        .conversation-area {
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background-color: #fafafa;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .message {
            margin: 20px 0;
            padding: 20px;
            border-radius: 15px;
            font-size: 26px;
            line-height: 1.6;
        }
        
        .message.ai {
            background-color: #e6f3ff;
            border-left: 4px solid #4f46e5;
        }
        
        .message.user {
            background-color: #f5f5f5;
            border-right: 4px solid #666666;
            text-align: right;
        }
        
        /* Progress Indicators */
        .progress-section {
            text-align: center;
            margin: 30px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #00aa00;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        /* Settings Interface */
        .setting-group {
            margin: 40px 0;
            padding: 30px;
            background-color: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
        }
        
        .volume-btn {
            width: 80px;
            height: 80px;
            font-size: 36px;
            margin: 0 20px;
        }
        
        .volume-slider {
            width: 300px;
            height: 10px;
            margin: 0 20px;
        }
        
        /* Emergency Interface */
        .emergency-screen {
            background-color: #ffebee;
            border: 4px solid #cc0000;
        }
        
        .emergency-header {
            background-color: #cc0000;
            color: white;
            padding: 30px;
            text-align: center;
            margin: -30px -30px 30px -30px;
            font-size: 48px;
        }
        
        .emergency-actions {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        
        .medical-info {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #4f46e5;
        }
        
        /* Responsive Design for Tablets */
        @media (max-width: 768px) {
            .app-container {
                padding: 20px;
            }
            
            .microphone-btn {
                width: 250px;
                height: 250px;
                font-size: 40px;
            }
            
            .btn-primary {
                min-width: 250px;
                min-height: 100px;
                font-size: 32px;
            }
            
            .health-scale {
                justify-content: center;
            }
            
            .mood-selection {
                justify-content: center;
            }
        }
        
        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            body {
                background-color: #000000;
                color: #ffffff;
            }
            
            .app-container {
                background-color: #000000;
                border: 3px solid #ffffff;
            }
            
            .btn-primary {
                border: 3px solid #ffffff;
            }
        }
        
        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Emergency Button - Always Visible -->
        <button class="btn btn-emergency" onclick="showScreen('emergency')">
            🚨 Emergency Help
        </button>

        <!-- SCREEN 1: DAILY WELCOME -->
        <div id="welcome" class="screen active">
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="font-size: 32px; color: #666; margin-bottom: 20px;">
                    Tuesday, August 22, 2025, 2:40 PM
                </div>
                <div style="font-size: 36px; margin-bottom: 30px;">
                    ☀️ 22°C • Partly Sunny
                </div>
                <h1>Good afternoon, Margaret!</h1>
            </div>

            <div class="family-section">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiBmaWxsPSIjNGY0NmU1IiByeD0iNzUiLz4KPHN2ZyB4PSI0NSIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAyQzEzLjEgMiAxNCAyLjkgMTQgNEMxNCA1LjEgMTMuMSA2IDEyIDZDMTAuOSA2IDEwIDUuMSAxMCA0QzEwIDIuOSAxMC45IDIgMTIgMlpNMjEgOVY3TDEzIDVWMTEuNUMxMi4zIDEwLjkgMTEuNCAxMC41IDEwLjUgMTAuNUM5IDEwLjUgOC41IDEzIDEwIDEzLjVWMjJIMTJWMTNIMTNMMTggMjJIMjBMMTMuNSAxMUwyMSA5WiIvPgo8L3N2Zz4KPHRleHQgeD0iNzUiIHk9IjEyNSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE4IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RGF2aWQ8L3RleHQ+Cjwvc3ZnPg==" alt="David" class="family-photo">
                <div class="family-message">
                    <strong>David is thinking of you today</strong>
                </div>
                <div style="font-size: 24px; text-align: center; color: #666;">
                    Your AI health companion is ready to chat
                </div>
                <div style="text-align: center; margin-top: 25px;">
                    <button class="btn btn-secondary" onclick="startCall()">
                        📞 Call David
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin: 50px 0;">
                <h2>Ready for today's health chat?</h2>
                <p style="font-size: 28px; margin: 30px 0; color: #555;">
                    Just like talking to a caring nurse - it only takes 5 minutes
                </p>
                <button class="btn btn-primary" onclick="showScreen('conversation')">
                    🎤 Start Today's Chat
                </button>
            </div>

            <div class="status-section">
                <div class="status-item">
                    <span class="status-icon">📅</span>
                    <span>Today: Not completed yet</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">👨‍👩‍👧‍👦</span>
                    <span>Your family will receive a summary tomorrow morning</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">🔋</span>
                    <span>Connected • Battery: 85%</span>
                </div>
            </div>

            <div class="nav-section">
                <button class="btn btn-secondary" onclick="showScreen('family')">
                    💬 Family Messages
                </button>
                <button class="btn btn-secondary" onclick="showScreen('settings')">
                    ⚙️ Settings
                </button>
            </div>
        </div>

        <!-- SCREEN 2: VOICE CONVERSATION INTERFACE -->
        <div id="conversation" class="screen">
            <div style="text-align: center;">
                <button class="btn back-btn" onclick="showScreen('welcome')">
                    ← Back to Home
                </button>
            </div>

            <h2 style="text-align: center;">Health Check-in with HomeBridge</h2>

            <div class="progress-section">
                <p style="font-size: 28px;">Question 2 of 5 • About 3 more minutes</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%;"></div>
                </div>
                <p style="font-size: 24px; color: #666;">You're doing great!</p>
            </div>

            <div class="conversation-area">
                <div class="message ai">
                    <strong>HomeBridge:</strong> Good afternoon, Margaret! How are you feeling today? You can tell me about your mood, any pain, or how you slept last night.
                </div>
                <div class="message user">
                    <strong>You:</strong> I'm feeling quite well today, thank you. I slept better than usual.
                </div>
                <div class="message ai">
                    <strong>HomeBridge:</strong> That's wonderful to hear! I'm so glad you had a good night's sleep. On a scale of 1 to 10, how would you rate your energy level today?
                </div>
            </div>

            <div class="voice-container">
                <div style="font-size: 32px; margin-bottom: 20px; color: #4f46e5;">
                    🎧 Listening for your answer...
                </div>
                <button class="microphone-btn listening" onclick="toggleListening()">
                    🎤
                </button>
                <div style="font-size: 28px; margin-top: 20px;">
                    <strong>Tap to Talk</strong>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="btn btn-secondary" onclick="retryListening()">
                    🔄 Say that again
                </button>
                <button class="btn btn-secondary" onclick="showScreen('health-check')">
                    ⌨️ Type instead
                </button>
                <button class="btn btn-secondary" onclick="needHelp()">
                    ❓ I need help
                </button>
            </div>
        </div>

        <!-- SCREEN 3: HEALTH CHECK-IN SPECIFICS -->
        <div id="health-check" class="screen">
            <div style="text-align: center;">
                <button class="btn back-btn" onclick="showScreen('conversation')">
                    ← Back to Chat
                </button>
            </div>

            <h2>Let's check how you're feeling</h2>

            <div class="setting-group">
                <h3>How is your pain today?</h3>
                <p style="font-size: 24px; margin-bottom: 30px;">Tap a number or say your answer</p>
                <div class="health-scale">
                    <div class="scale-item" onclick="selectPain(1)">1</div>
                    <div class="scale-item" onclick="selectPain(2)">2</div>
                    <div class="scale-item" onclick="selectPain(3)">3</div>
                    <div class="scale-item" onclick="selectPain(4)">4</div>
                    <div class="scale-item" onclick="selectPain(5)">5</div>
                    <div class="scale-item" onclick="selectPain(6)">6</div>
                    <div class="scale-item" onclick="selectPain(7)">7</div>
                    <div class="scale-item" onclick="selectPain(8)">8</div>
                    <div class="scale-item" onclick="selectPain(9)">9</div>
                    <div class="scale-item" onclick="selectPain(10)">10</div>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 20px; margin-top: 10px;">
                    <span>No pain</span>
                    <span>Worst pain</span>
                </div>
            </div>

            <div class="setting-group">
                <h3>How is your mood today?</h3>
                <div class="mood-selection">
                    <div class="mood-btn" onclick="selectMood('very-sad')">
                        😢
                        <div class="mood-label">Very sad</div>
                    </div>
                    <div class="mood-btn" onclick="selectMood('sad')">
                        😕
                        <div class="mood-label">Sad</div>
                    </div>
                    <div class="mood-btn" onclick="selectMood('okay')">
                        😐
                        <div class="mood-label">Okay</div>
                    </div>
                    <div class="mood-btn" onclick="selectMood('good')">
                        😊
                        <div class="mood-label">Good</div>
                    </div>
                    <div class="mood-btn" onclick="selectMood('very-happy')">
                        😄
                        <div class="mood-label">Very happy</div>
                    </div>
                </div>
            </div>

            <div class="setting-group">
                <h3>How did you sleep last night?</h3>
                <div style="display: flex; justify-content: space-around; margin: 30px 0;">
                    <button class="btn btn-success" onclick="selectSleep('well')" style="background-color: #00aa00;">
                        😴 Slept well
                    </button>
                    <button class="btn" onclick="selectSleep('some-trouble')" style="background-color: #ffcc00; color: #000;">
                        😪 Some trouble
                    </button>
                    <button class="btn" onclick="selectSleep('poor')" style="background-color: #ff6600; color: #fff;">
                        😵 Poor sleep
                    </button>
                </div>
            </div>

            <div class="setting-group">
                <h3>Did you take your morning medications?</h3>
                <div style="display: flex; justify-content: center; gap: 30px; margin: 30px 0;">
                    <button class="btn btn-success" onclick="selectMedication(true)">
                        ✅ YES
                    </button>
                    <button class="btn btn-secondary" onclick="selectMedication(false)">
                        ❌ NO
                    </button>
                </div>
                <div style="text-align: center;">
                    <button class="btn btn-secondary" onclick="setMedicationReminder()">
                        ⏰ Set reminder for later
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <button class="btn btn-primary" onclick="completeHealthCheck()">
                    ✅ Complete Health Check
                </button>
            </div>
        </div>

        <!-- SCREEN 4: FAMILY MESSAGES -->
        <div id="family" class="screen">
            <div style="text-align: center;">
                <button class="btn back-btn" onclick="showScreen('welcome')">
                    ← Back to Home
                </button>
            </div>

            <h2>Messages from Your Family</h2>

            <div class="family-section">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZmY2Njk5IiByeD0iNTAiLz4KPHN2ZyB4PSIzMCIgeT0iMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAyQzEzLjEgMiAxNCAyLjkgMTQgNEMxNCA1LjEgMTMuMSA2IDEyIDZDMTAuOSA2IDEwIDUuMSAxMCA0QzEwIDIuOSAxMC45IDIgMTIgMlpNMTIgN0MxNC43IDcgMTYuOCA5LjEgMTYuOCAxMS44VjIySDEzLjJWMTZIMTAuOFYyMkg3LjJWMTEuOEM3LjIgOS4xIDkuMyA3IDEyIDdaIi8+Cjwvc3ZnPgo8dGV4dCB4PSI1MCIgeT0iODUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkVtbWE8L3RleHQ+Cjwvc3ZnPg==" alt="Emma" style="width: 100px; height: 100px; border-radius: 50%; margin-right: 20px; float: left;">
                <div style="margin-left: 130px;">
                    <h3>Emma (Granddaughter)</h3>
                    <p style="font-size: 26px; margin: 15px 0;">
                        "Hi Grandma! I hope you're having a wonderful day. I got an A on my math test thanks to all your help with studying! Love you ❤️"
                    </p>
                    <div style="font-size: 20px; color: #666;">2 hours ago</div>
                    <button class="btn btn-primary" onclick="replyToFamily('Emma')" style="margin-top: 20px;">
                        💬 Reply to Emma
                    </button>
                </div>
                <div style="clear: both;"></div>
            </div>

            <div class="family-section">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNGY0NmU1IiByeD0iNTAiLz4KPHN2ZyB4PSIzMCIgeT0iMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAyQzEzLjEgMiAxNCAyLjkgMTQgNEMxNCA1LjEgMTMuMSA2IDEyIDZDMTAuOSA2IDEwIDUuMSAxMCA0QzEwIDIuOSAxMC45IDIgMTIgMlpNMjEgOVY3TDEzIDVWMTEuNUMxMi4zIDEwLjkgMTEuNCAxMC41IDEwLjUgMTAuNUM5IDEwLjUgOC41IDEzIDEwIDEzLjVWMjJIMTJWMTNIMTNMMTggMjJIMjBMMTMuNSAxMUwyMSA5WiIvPgo8L3N2Zz4KPHRleHQgeD0iNTAiIHk9Ijg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5EYXZpZDwvdGV4dD4KPC9zdmc+" alt="David" style="width: 100px; height: 100px; border-radius: 50%; margin-right: 20px; float: left;">
                <div style="margin-left: 130px;">
                    <h3>David (Son)</h3>
                    <div style="background-color: #e6f3ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
                        <div style="font-size: 20px; color: #666; margin-bottom: 10px;">🔊 Voice Message (1:30)</div>
                        <button class="btn btn-secondary" onclick="playVoiceMessage()" style="font-size: 24px;">
                            ▶️ Play Message
                        </button>
                    </div>
                    <div style="font-size: 20px; color: #666;">This morning</div>
                    <button class="btn btn-primary" onclick="replyToFamily('David')" style="margin-top: 20px;">
                        🎤 Record Reply
                    </button>
                </div>
                <div style="clear: both;"></div>
            </div>

            <div class="setting-group">
                <h3>Quick Replies</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button class="btn btn-secondary" onclick="sendQuickReply('well')">
                        "I'm doing well, love you!"
                    </button>
                    <button class="btn btn-secondary" onclick="sendQuickReply('thank-you')">
                        "Thank you for thinking of me"
                    </button>
                    <button class="btn btn-secondary" onclick="sendQuickReply('call')">
                        "Please call me when you can"
                    </button>
                    <button class="btn btn-secondary" onclick="sendQuickReply('fine')">
                        "Everything is fine here"
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <button class="btn btn-primary" onclick="takePhotoForFamily()">
                    📷 Take photo for family
                </button>
            </div>
        </div>

        <!-- SCREEN 5: EMERGENCY HELP -->
        <div id="emergency" class="screen emergency-screen">
            <div class="emergency-header">
                🚨 EMERGENCY HELP
            </div>

            <div class="emergency-actions">
                <button class="btn btn-emergency" onclick="callEmergencyServices()" style="position: static; font-size: 36px; min-width: 400px; margin: 20px;">
                    🚨 Call Emergency Services
                </button>

                <button class="btn btn-primary" onclick="callFamily('David')" style="font-size: 32px; min-width: 350px;">
                    📞 Call David (Son)
                </button>

                <button class="btn btn-primary" onclick="callFamily('Sarah')" style="font-size: 32px; min-width: 350px;">
                    📞 Call Sarah (Daughter)
                </button>

                <button class="btn btn-secondary" onclick="shareLocation()" style="font-size: 28px;">
                    📍 Share my location
                </button>
            </div>

            <div class="medical-info">
                <h3>Your Medical Information</h3>
                <div style="font-size: 24px; line-height: 1.8;">
                    <p><strong>Medications:</strong> Lisinopril 10mg, Metformin 500mg</p>
                    <p><strong>Allergies:</strong> Penicillin</p>
                    <p><strong>Conditions:</strong> Type 2 Diabetes, High Blood Pressure</p>
                    <p><strong>Doctor:</strong> Dr. Smith (555) 123-4567</p>
                    <p><strong>Emergency Contact:</strong> David (555) 987-6543</p>
                </div>
                <button class="btn btn-secondary" onclick="readMedicalInfo()">
                    🔊 Read this aloud
                </button>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <h3>Quick Medical Questions</h3>
                <div style="display: flex; flex-direction: column; gap: 20px; align-items: center;">
                    <div>
                        <p style="font-size: 28px; margin-bottom: 15px;">Are you hurt?</p>
                        <button class="btn btn-emergency" onclick="emergencyResponse('hurt', true)">YES</button>
                        <button class="btn btn-success" onclick="emergencyResponse('hurt', false)">NO</button>
                    </div>
                    <div>
                        <p style="font-size: 28px; margin-bottom: 15px;">Are you having chest pain?</p>
                        <button class="btn btn-emergency" onclick="emergencyResponse('chest-pain', true)">YES</button>
                        <button class="btn btn-success" onclick="emergencyResponse('chest-pain', false)">NO</button>
                    </div>
                    <div>
                        <p style="font-size: 28px; margin-bottom: 15px;">Are you having trouble breathing?</p>
                        <button class="btn btn-emergency" onclick="emergencyResponse('breathing', true)">YES</button>
                        <button class="btn btn-success" onclick="emergencyResponse('breathing', false)">NO</button>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="btn back-btn" onclick="showScreen('welcome')">
                    ← Back to Home
                </button>
            </div>
        </div>

        <!-- SCREEN 6: SETTINGS -->
        <div id="settings" class="screen">
            <div style="text-align: center;">
                <button class="btn back-btn" onclick="showScreen('welcome')">
                    ← Back to Home
                </button>
            </div>

            <h2>Settings</h2>

            <div class="setting-group">
                <h3>Volume Controls</h3>
                <div class="volume-control">
                    <button class="btn volume-btn" onclick="changeVolume(-1)">-</button>
                    <input type="range" class="volume-slider" min="0" max="100" value="75" onchange="setVolume(this.value)">
                    <button class="btn volume-btn" onclick="changeVolume(1)">+</button>
                </div>
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn btn-secondary" onclick="testVolume()">
                        🔊 Test volume level
                    </button>
                </div>
            </div>

            <div class="setting-group">
                <h3>Text Size</h3>
                <div style="display: flex; flex-direction: column; gap: 20px;">
                    <button class="btn btn-secondary" onclick="setTextSize('large')">
                        <span style="font-size: 28px;">Large text (current)</span>
                    </button>
                    <button class="btn btn-secondary" onclick="setTextSize('extra-large')">
                        <span style="font-size: 36px;">Extra large text</span>
                    </button>
                    <button class="btn btn-secondary" onclick="setTextSize('huge')">
                        <span style="font-size: 44px;">Huge text</span>
                    </button>
                </div>
            </div>

            <div class="setting-group">
                <h3>Family Contacts</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div style="display: flex; align-items: center; padding: 20px; background: white; border-radius: 10px;">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjNGY0NmU1IiByeD0iMzAiLz4KPHRleHQgeD0iMzAiIHk9IjM1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5EPC90ZXh0Pgo8L3N2Zz4=" alt="David" style="width: 60px; height: 60px; margin-right: 20px;">
                        <div>
                            <div style="font-size: 26px; font-weight: 600;">David (Main Contact)</div>
                            <div style="font-size: 22px; color: #666;">(555) 987-6543</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="changeMainContact()">
                        📞 Change main family contact
                    </button>
                    <button class="btn btn-secondary" onclick="addEmergencyContact()">
                        ➕ Add emergency contact
                    </button>
                    <button class="btn btn-secondary" onclick="testEmergencyCall()">
                        📞 Test emergency call
                    </button>
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <button class="btn btn-secondary" onclick="getHelpFromFamily()">
                    ❓ Get help from family with settings
                </button>
            </div>
        </div>
    </div>

    <script>
        // Current state management
        let currentScreen = 'welcome';
        let isListening = false;
        let healthData = {
            pain: null,
            mood: null,
            sleep: null,
            medication: null
        };

        // Screen navigation
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show selected screen
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            // Announce screen change for screen readers
            announceScreenChange(screenId);
        }

        function announceScreenChange(screenId) {
            const announcements = {
                'welcome': 'Welcome screen loaded',
                'conversation': 'Health conversation screen loaded',
                'health-check': 'Health check-in screen loaded',
                'family': 'Family messages screen loaded',
                'emergency': 'Emergency help screen loaded',
                'settings': 'Settings screen loaded'
            };
            
            // Create announcement for accessibility
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.textContent = announcements[screenId] || 'Screen changed';
            announcement.style.position = 'absolute';
            announcement.style.left = '-9999px';
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // Voice interface functions
        function toggleListening() {
            const micBtn = document.querySelector('.microphone-btn');
            
            if (!isListening) {
                startListening(micBtn);
            } else {
                stopListening(micBtn);
            }
        }

        function startListening(micBtn) {
            isListening = true;
            micBtn.classList.add('listening');
            micBtn.classList.remove('processing');
            
            // Simulate listening for demo
            setTimeout(() => {
                if (isListening) {
                    processVoiceInput(micBtn);
                }
            }, 3000);
            
            // Audio feedback
            playAudioFeedback('listening');
        }

        function stopListening(micBtn) {
            isListening = false;
            micBtn.classList.remove('listening');
            micBtn.classList.remove('processing');
            
            playAudioFeedback('stopped');
        }

        function processVoiceInput(micBtn) {
            micBtn.classList.remove('listening');
            micBtn.classList.add('processing');
            
            // Simulate processing
            setTimeout(() => {
                stopListening(micBtn);
                addConversationMessage('user', 'I feel pretty good today, maybe a 7 out of 10 for energy.');
                setTimeout(() => {
                    addConversationMessage('ai', 'That\'s wonderful to hear! A 7 out of 10 is really good energy. Now, let me ask about any pain you might be experiencing today.');
                }, 1500);
            }, 2000);
        }

        function addConversationMessage(sender, message) {
            const conversationArea = document.querySelector('.conversation-area');
            if (conversationArea) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                messageDiv.innerHTML = `<strong>${sender === 'ai' ? 'HomeBridge' : 'You'}:</strong> ${message}`;
                conversationArea.appendChild(messageDiv);
                conversationArea.scrollTop = conversationArea.scrollHeight;
            }
        }

        function retryListening() {
            playAudioFeedback('retry');
            const micBtn = document.querySelector('.microphone-btn');
            if (micBtn) {
                startListening(micBtn);
            }
        }

        function needHelp() {
            alert('Connecting you to David...\n\nThis would normally call your main family contact for assistance.');
            playAudioFeedback('help');
        }

        // Health check functions
        function selectPain(level) {
            healthData.pain = level;
            
            // Visual feedback
            document.querySelectorAll('.health-scale .scale-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            playAudioFeedback('selection');
            
            // Auto-advance after selection
            setTimeout(() => {
                announceSelection(`Pain level ${level} selected`);
            }, 500);
        }

        function selectMood(mood) {
            healthData.mood = mood;
            
            // Visual feedback
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            playAudioFeedback('selection');
            announceSelection(`Mood ${mood.replace('-', ' ')} selected`);
        }

        function selectSleep(quality) {
            healthData.sleep = quality;
            playAudioFeedback('selection');
            announceSelection(`Sleep quality ${quality.replace('-', ' ')} selected`);
            
            // Visual feedback
            event.target.style.transform = 'scale(1.1)';
            setTimeout(() => {
                event.target.style.transform = 'scale(1)';
            }, 200);
        }

        function selectMedication(taken) {
            healthData.medication = taken;
            playAudioFeedback('selection');
            announceSelection(`Medication ${taken ? 'taken' : 'not taken'} recorded`);
            
            // Visual feedback
            event.target.style.transform = 'scale(1.1)';
            setTimeout(() => {
                event.target.style.transform = 'scale(1)';
            }, 200);
        }

        function setMedicationReminder() {
            alert('Medication reminder set for 2:00 PM today.\n\nYour family will be notified if you miss it.');
            playAudioFeedback('reminder');
        }

        function completeHealthCheck() {
            // Validate that key items are completed
            if (!healthData.mood) {
                alert('Please select your mood before completing.');
                return;
            }
            
            // Show completion message
            alert('Health check completed! 🎉\n\nYour family will receive a summary tomorrow morning.\n\nThank you for taking care of yourself!');
            
            // Return to home screen
            showScreen('welcome');
            
            // Update home screen to show completed status
            updateCompletionStatus();
            
            playAudioFeedback('success');
        }

        function updateCompletionStatus() {
            const statusSection = document.querySelector('.status-section');
            if (statusSection) {
                const statusItem = statusSection.querySelector('.status-item');
                if (statusItem) {
                    statusItem.innerHTML = `
                        <span class="status-icon">✅</span>
                        <span>Today: Completed at ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    `;
                }
            }
        }

        // Family interaction functions
        function startCall() {
            alert('Calling David...\n\nThis would normally place a phone call to your main family contact.');
            playAudioFeedback('calling');
        }

        function replyToFamily(member) {
            alert(`Recording reply to ${member}...\n\nSpeak your message after the beep. This would normally record and send your voice message.`);
            playAudioFeedback('recording');
        }

        function playVoiceMessage() {
            alert('Playing voice message from David:\n\n"Hi Mom, just wanted to check in and see how you\'re doing today. Emma and I are thinking of you. I\'ll call you this evening around 7 PM. Love you!"');
            playAudioFeedback('playback');
        }

        function sendQuickReply(type) {
            const messages = {
                'well': 'I\'m doing well, love you!',
                'thank-you': 'Thank you for thinking of me',
                'call': 'Please call me when you can',
                'fine': 'Everything is fine here'
            };
            
            alert(`Sending message: "${messages[type]}"\n\nYour family will receive this message immediately.`);
            playAudioFeedback('sent');
        }

        function takePhotoForFamily() {
            alert('Camera opening...\n\nThis would normally open the camera to take a photo to share with your family.');
            playAudioFeedback('photo');
        }

        // Emergency functions
        function callEmergencyServices() {
            if (confirm('Are you sure you want to call Emergency Services?\n\nThis will call 999 and notify your family.')) {
                alert('Calling Emergency Services (999)...\n\nYour location and medical information have been shared.\nYour family has been notified.');
                playAudioFeedback('emergency');
            }
        }

        function callFamily(member) {
            alert(`Calling ${member}...\n\nThis would normally place an emergency call to ${member}.`);
            playAudioFeedback('calling');
        }

        function shareLocation() {
            alert('Location shared with emergency contacts.\n\nYour current location has been sent to David and emergency services.');
            playAudioFeedback('location');
        }

        function readMedicalInfo() {
            // This would use speech synthesis to read the medical information aloud
            alert('Reading medical information aloud...\n\nThis would use text-to-speech to read your medical details.');
            playAudioFeedback('reading');
        }

        function emergencyResponse(question, answer) {
            const responses = {
                'hurt': answer ? 'Recording that you are injured. Emergency services will be contacted.' : 'Recording that you are not injured.',
                'chest-pain': answer ? 'Recording chest pain. This is serious - emergency services will be contacted immediately.' : 'Recording no chest pain.',
                'breathing': answer ? 'Recording breathing difficulty. Emergency services will be contacted immediately.' : 'Recording normal breathing.'
            };
            
            alert(responses[question]);
            
            if (answer && (question === 'chest-pain' || question === 'breathing')) {
                setTimeout(() => {
                    callEmergencyServices();
                }, 1000);
            }
            
            playAudioFeedback(answer ? 'urgent' : 'normal');
        }

        // Settings functions
        function changeVolume(direction) {
            const slider = document.querySelector('.volume-slider');
            const currentValue = parseInt(slider.value);
            const newValue = Math.max(0, Math.min(100, currentValue + (direction * 10)));
            slider.value = newValue;
            setVolume(newValue);
        }

        function setVolume(value) {
            // This would adjust the actual system volume
            announceSelection(`Volume set to ${value}%`);
            playAudioFeedback('volume');
        }

        function testVolume() {
            alert('Testing volume...\n\n"Hello Margaret! This is your HomeBridge companion. Can you hear me clearly?"');
            playAudioFeedback('test');
        }

        function setTextSize(size) {
            const sizes = {
                'large': '28px',
                'extra-large': '36px', 
                'huge': '44px'
            };
            
            // This would normally update the CSS custom properties
            alert(`Text size changed to ${size.replace('-', ' ')}`);
            playAudioFeedback('selection');
        }

        function changeMainContact() {
            alert('Contact family to change main contact...\n\nThis would allow family members to update your main contact remotely.');
            playAudioFeedback('settings');
        }

        function addEmergencyContact() {
            alert('Adding emergency contact...\n\nThis would allow you to add a new emergency contact with family assistance.');
            playAudioFeedback('settings');
        }

        function testEmergencyCall() {
            alert('Testing emergency call to David...\n\nThis would place a test call to verify the emergency system is working.');
            playAudioFeedback('test');
        }

        function getHelpFromFamily() {
            alert('Requesting help from David...\n\nYour family will be notified that you need assistance with settings.');
            playAudioFeedback('help');
        }

        // Audio feedback system
        function playAudioFeedback(type) {
            // This would play appropriate audio feedback for different actions
            // For demo purposes, we'll just log the feedback type
            console.log(`Audio feedback: ${type}`);
            
            // In a real implementation, this would use the Web Audio API or audio elements
            // to provide audio confirmation of user actions
        }

        function announceSelection(message) {
            // Create accessibility announcement
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.textContent = message;
            announcement.style.position = 'absolute';
            announcement.style.left = '-9999px';
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set up accessibility features
            setupAccessibility();
            
            // Initialize voice recognition if available
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                console.log('Speech recognition available');
            }
            
            // Set initial focus for screen readers
            document.querySelector('.btn-primary').focus();
            
            // Set up keyboard navigation
            setupKeyboardNavigation();
        });

        function setupAccessibility() {
            // Add keyboard navigation support
            document.addEventListener('keydown', function(e) {
                // Emergency key (Escape)
                if (e.key === 'Escape') {
                    showScreen('emergency');
                }
                
                // Home key
                if (e.key === 'Home' || (e.ctrlKey && e.key === 'h')) {
                    showScreen('welcome');
                }
                
                // Space or Enter for voice activation
                if ((e.key === ' ' || e.key === 'Enter') && currentScreen === 'conversation') {
                    e.preventDefault();
                    toggleListening();
                }
            });
            
            // Add focus indicators for better visibility
            const style = document.createElement('style');
            style.textContent = `
                *:focus {
                    outline: 4px solid #4f46e5 !important;
                    outline-offset: 2px !important;
                }
            `;
            document.head.appendChild(style);
        }

        function setupKeyboardNavigation() {
            // Add tabindex to all interactive elements for consistent navigation
            document.querySelectorAll('.btn, .scale-item, .mood-btn').forEach((element, index) => {
                element.setAttribute('tabindex', '0');
                
                // Add keyboard activation
                element.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
        }

        // High contrast mode detection and adjustment
        if (window.matchMedia && window.matchMedia('(prefers-contrast: high)').matches) {
            document.body.classList.add('high-contrast');
        }

        // Reduced motion detection
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            document.body.classList.add('reduced-motion');
        }

        // Battery status monitoring (for mobile devices)
        if ('getBattery' in navigator) {
            navigator.getBattery().then(function(battery) {
                function updateBatteryStatus() {
                    const batteryLevel = Math.round(battery.level * 100);
                    const statusSection = document.querySelector('.status-section');
                    if (statusSection) {
                        const batteryStatus = statusSection.querySelector('.status-item:last-child');
                        if (batteryStatus) {
                            batteryStatus.innerHTML = `
                                <span class="status-icon">🔋</span>
                                <span>Connected • Battery: ${batteryLevel}%</span>
                            `;
                        }
                    }
                }
                
                battery.addEventListener('levelchange', updateBatteryStatus);
                updateBatteryStatus();
            });
        }
    </script>
</body>
</html>