<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>HomeBridge - Daily Health Companion</title>
    <style>
        /* ELDERLY-FIRST DAILY APPLICATION CSS */
        
        /* Enhanced base settings for daily use */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            font-size: 28px; /* Increased from 24px for daily use */
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            font-size: 28px; /* Minimum 28px as specified */
            font-weight: 600; /* Semi-bold for better visibility */
            line-height: 1.8; /* Increased line height for easier reading */
            letter-spacing: 0.1em; /* Enhanced character clarity */
            background-color: #ffffff; /* Pure white */
            color: #000000; /* Pure black for 8:1 contrast */
            overflow-x: hidden;
            padding: 20px;
        }
        
        /* Screen container with enhanced spacing */
        .screen {
            display: none;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: 100vh;
            text-align: center;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Emergency button - always accessible */
        .emergency-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #cc0000;
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            z-index: 1000;
            min-width: 120px;
            min-height: 80px;
        }
        
        .emergency-button:hover,
        .emergency-button:focus {
            background: #990000;
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        /* Headers with enhanced sizes */
        h1 {
            font-size: 56px; /* Increased for critical actions */
            font-weight: bold;
            margin-bottom: 40px;
            color: #000000;
        }
        
        h2 {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #000000;
        }
        
        h3 {
            font-size: 40px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #000000;
        }
        
        /* Text elements with enhanced contrast */
        .large-text {
            font-size: 36px;
            margin-bottom: 20px;
            color: #000000;
        }
        
        .medium-text {
            font-size: 32px;
            margin-bottom: 15px;
            color: #000000;
        }
        
        .small-text {
            font-size: 28px;
            margin-bottom: 10px;
            color: #000000;
        }
        
        /* Enhanced button system with 80px minimum touch targets */
        .primary-button {
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 16px;
            padding: 40px 60px;
            font-size: 36px;
            font-weight: bold;
            cursor: pointer;
            margin: 30px auto;
            display: block;
            min-width: 300px;
            min-height: 120px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }
        
        .primary-button:hover,
        .primary-button:focus {
            background: #3730a3;
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .huge-button {
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 60px 80px;
            font-size: 48px;
            font-weight: bold;
            cursor: pointer;
            margin: 40px auto;
            display: block;
            min-width: 400px;
            min-height: 160px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        }
        
        .huge-button:hover,
        .huge-button:focus {
            background: #3730a3;
            outline: 6px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .secondary-button {
            background: #6b7280;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 30px 40px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px;
            min-width: 200px;
            min-height: 80px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .secondary-button:hover,
        .secondary-button:focus {
            background: #4b5563;
            outline: 4px solid #fbbf24;
        }
        
        .call-button {
            background: #00aa00;
            color: white;
            border: none;
            border-radius: 16px;
            padding: 30px 50px;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            margin: 25px;
            min-width: 300px;
            min-height: 100px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.3);
        }
        
        .call-button:hover,
        .call-button:focus {
            background: #008800;
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        /* Date and weather header */
        .header-info {
            background: #f8fafc;
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .date-time {
            font-size: 32px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 15px;
        }
        
        .weather-widget {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .weather-icon {
            font-size: 64px;
        }
        
        .weather-info {
            text-align: left;
        }
        
        .weather-temp {
            font-size: 48px;
            font-weight: bold;
            color: #000000;
        }
        
        .weather-desc {
            font-size: 28px;
            color: #000000;
        }
        
        /* Enhanced family context */
        .family-context {
            background: #e6f3ff;
            border: 4px solid #4f46e5;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            text-align: center;
        }
        
        .family-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: #d1d5db;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            border: 4px solid #4f46e5;
        }
        
        /* Status indicators with better visibility */
        .status-section {
            background: #f0f9ff;
            border: 3px solid #0ea5e9;
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .status-completed {
            background: #dcfce7;
            border-color: #00aa00;
        }
        
        .status-pending {
            background: #fef3c7;
            border-color: #ff6600;
        }
        
        /* Voice conversation interface */
        .ai-avatar {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: #4f46e5;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            color: white;
            position: relative;
        }
        
        .ai-avatar.listening {
            animation: pulse-blue 1.5s infinite;
        }
        
        .ai-avatar.thinking {
            animation: pulse-yellow 1s infinite;
            background: #ff6600;
        }
        
        .ai-avatar.speaking {
            animation: pulse-green 0.8s infinite;
            background: #00aa00;
        }
        
        @keyframes pulse-blue {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(79, 70, 229, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
        }
        
        @keyframes pulse-yellow {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); }
            100% { transform: scale(1); }
        }
        
        .ai-status {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
            padding: 20px;
            border-radius: 12px;
        }
        
        .ai-status.listening {
            background: #dbeafe;
            color: #1d4ed8;
        }
        
        .ai-status.thinking {
            background: #fef3c7;
            color: #d97706;
        }
        
        .ai-status.speaking {
            background: #dcfce7;
            color: #166534;
        }
        
        /* Enhanced conversation display */
        .conversation {
            text-align: left;
            max-width: 700px;
            margin: 40px auto;
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            border: 3px solid #e5e7eb;
            border-radius: 16px;
            background: #ffffff;
        }
        
        .message {
            margin: 30px 0;
            padding: 25px;
            border-radius: 20px;
            font-size: 28px;
            line-height: 1.6;
            clear: both;
        }
        
        .message.ai {
            background: #e6f3ff;
            border: 3px solid #4f46e5;
            margin-right: 80px;
            float: left;
        }
        
        .message.user {
            background: #f5f5f5;
            border: 3px solid #6b7280;
            margin-left: 80px;
            text-align: right;
            float: right;
        }
        
        .message-time {
            font-size: 20px;
            color: #6b7280;
            margin-top: 10px;
        }
        
        /* Massive microphone interface */
        .microphone-interface {
            margin: 50px 0;
        }
        
        .microphone-button {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            background: #4f46e5;
            border: none;
            color: white;
            font-size: 120px;
            cursor: pointer;
            margin: 30px auto;
            display: block;
            box-shadow: 0 12px 36px rgba(0,0,0,0.4);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .microphone-button:hover,
        .microphone-button:focus {
            background: #3730a3;
            outline: 8px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .microphone-button.recording {
            background: #cc0000;
            animation: pulse-recording 1s infinite;
        }
        
        .microphone-button.processing {
            background: #ff6600;
            animation: spin 2s linear infinite;
        }
        
        @keyframes pulse-recording {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .mic-label {
            font-size: 32px;
            font-weight: bold;
            margin-top: 20px;
            color: #000000;
        }
        
        /* Audio level indicator */
        .audio-level {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 30px 0;
        }
        
        .audio-bar {
            width: 16px;
            height: 40px;
            background: #d1d5db;
            border-radius: 8px;
        }
        
        .audio-bar.active {
            background: #4f46e5;
            animation: bounce 0.6s infinite alternate;
        }
        
        @keyframes bounce {
            from { height: 40px; }
            to { height: 70px; }
        }
        
        /* Health assessment scales */
        .health-scale {
            margin: 40px 0;
            padding: 30px;
            background: #f8fafc;
            border-radius: 20px;
            border: 3px solid #e2e8f0;
        }
        
        .scale-title {
            font-size: 40px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #000000;
        }
        
        .pain-scale {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
        }
        
        .pain-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid #4f46e5;
            background: white;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .pain-button:hover,
        .pain-button:focus,
        .pain-button.selected {
            background: #4f46e5;
            color: white;
            outline: 4px solid #fbbf24;
            transform: scale(1.1);
        }
        
        .mood-scale {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }
        
        .mood-button {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            border: 4px solid #e5e7eb;
            background: white;
            font-size: 64px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            padding: 10px;
        }
        
        .mood-button:hover,
        .mood-button:focus,
        .mood-button.selected {
            border-color: #4f46e5;
            background: #e6f3ff;
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .mood-label {
            font-size: 16px;
            font-weight: bold;
            margin-top: 5px;
            color: #000000;
        }
        
        .sleep-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .sleep-button {
            min-width: 200px;
            height: 120px;
            border-radius: 16px;
            border: 4px solid transparent;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: all 0.2s ease;
        }
        
        .sleep-button.good {
            background: #dcfce7;
            border-color: #00aa00;
        }
        
        .sleep-button.fair {
            background: #fef3c7;
            border-color: #ff6600;
        }
        
        .sleep-button.poor {
            background: #fee2e2;
            border-color: #cc0000;
        }
        
        .sleep-button:hover,
        .sleep-button:focus,
        .sleep-button.selected {
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        /* Energy level battery indicator */
        .energy-level {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }
        
        .energy-bar {
            width: 60px;
            height: 100px;
            border: 4px solid #4f46e5;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .energy-bar:hover,
        .energy-bar:focus {
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .energy-bar.filled {
            background: #4f46e5;
        }
        
        .energy-bar.selected {
            background: #00aa00;
        }
        
        /* Medication tracking */
        .medication-section {
            background: #f0f9ff;
            border: 3px solid #0ea5e9;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
        }
        
        .medication-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .medication-item {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 16px;
            padding: 25px;
            text-align: center;
        }
        
        .medication-photo {
            width: 100px;
            height: 100px;
            background: #f3f4f6;
            border-radius: 12px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }
        
        .yes-no-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .yes-button {
            background: #00aa00;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 20px 40px;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            min-width: 150px;
            min-height: 80px;
        }
        
        .no-button {
            background: #cc0000;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 20px 40px;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            min-width: 150px;
            min-height: 80px;
        }
        
        .yes-button:hover,
        .yes-button:focus,
        .no-button:hover,
        .no-button:focus {
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        /* Family messages interface */
        .family-messages {
            background: #f8fafc;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
        }
        
        .message-list {
            display: grid;
            gap: 25px;
            margin: 30px 0;
        }
        
        .family-message {
            background: white;
            border: 3px solid #e5e7eb;
            border-radius: 16px;
            padding: 30px;
            display: flex;
            align-items: center;
            gap: 25px;
        }
        
        .message-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #d1d5db;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }
        
        .message-content {
            flex-grow: 1;
            text-align: left;
        }
        
        .message-from {
            font-size: 24px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 10px;
        }
        
        .message-text {
            font-size: 28px;
            color: #000000;
            margin-bottom: 15px;
        }
        
        .voice-message-button {
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 30px;
            font-size: 24px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .quick-responses {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .quick-response {
            background: #e6f3ff;
            border: 3px solid #4f46e5;
            border-radius: 16px;
            padding: 25px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .quick-response:hover,
        .quick-response:focus {
            background: #dbeafe;
            outline: 4px solid #fbbf24;
            transform: scale(1.02);
        }
        
        /* Emergency interface */
        .emergency-screen {
            background: #fee2e2;
            border: 6px solid #cc0000;
            border-radius: 24px;
            padding: 50px;
            margin: 20px 0;
        }
        
        .emergency-title {
            font-size: 64px;
            font-weight: bold;
            color: #cc0000;
            margin-bottom: 40px;
        }
        
        .emergency-actions {
            display: grid;
            gap: 30px;
            margin: 40px 0;
        }
        
        .emergency-call-button {
            background: #cc0000;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 40px 60px;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            min-height: 120px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.4);
        }
        
        .emergency-call-button:hover,
        .emergency-call-button:focus {
            background: #990000;
            outline: 6px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .emergency-call-button.family {
            background: #0ea5e9;
        }
        
        .emergency-call-button.family:hover,
        .emergency-call-button.family:focus {
            background: #0284c7;
        }
        
        .medical-info {
            background: white;
            border: 4px solid #cc0000;
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }
        
        .medical-info h3 {
            color: #cc0000;
            margin-bottom: 20px;
        }
        
        .medical-info ul {
            list-style: none;
            padding: 0;
        }
        
        .medical-info li {
            font-size: 24px;
            margin: 10px 0;
            padding: 10px;
            background: #f9fafb;
            border-radius: 8px;
        }
        
        /* Settings interface */
        .settings-section {
            background: #f8fafc;
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }
        
        .volume-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #4f46e5;
            color: white;
            border: none;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .volume-button:hover,
        .volume-button:focus {
            background: #3730a3;
            outline: 4px solid #fbbf24;
        }
        
        .volume-display {
            font-size: 48px;
            font-weight: bold;
            color: #000000;
            min-width: 100px;
            text-align: center;
        }
        
        .text-size-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .text-size-button {
            background: white;
            border: 4px solid #4f46e5;
            border-radius: 16px;
            padding: 30px;
            cursor: pointer;
            min-width: 200px;
            transition: all 0.2s ease;
        }
        
        .text-size-button:hover,
        .text-size-button:focus,
        .text-size-button.selected {
            background: #e6f3ff;
            outline: 4px solid #fbbf24;
            transform: scale(1.05);
        }
        
        .text-size-preview {
            margin-top: 15px;
            font-weight: bold;
            color: #000000;
        }
        
        /* Weekly celebration */
        .celebration-screen {
            background: linear-gradient(135deg, #dbeafe 0%, #e6f3ff 100%);
            border-radius: 24px;
            padding: 50px;
            margin: 20px 0;
        }
        
        .celebration-icon {
            font-size: 120px;
            margin: 30px 0;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .achievement-card {
            background: white;
            border: 4px solid #00aa00;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
        }
        
        .achievement-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .achievement-text {
            font-size: 28px;
            font-weight: bold;
            color: #000000;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e5e7eb;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #00aa00;
            border-radius: 15px;
            transition: width 0.5s ease;
        }
        
        /* Navigation */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .nav-button {
            background: #6b7280;
            color: white;
            border: none;
            border-radius: 16px;
            padding: 25px 40px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            min-width: 200px;
            min-height: 80px;
        }
        
        .nav-button:hover,
        .nav-button:focus {
            background: #4b5563;
            outline: 4px solid #fbbf24;
        }
        
        .nav-button.active {
            background: #4f46e5;
        }
        
        .back-button {
            position: absolute;
            top: 120px;
            left: 20px;
            background: #6b7280;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 25px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .back-button:hover,
        .back-button:focus {
            background: #4b5563;
            outline: 4px solid #fbbf24;
        }
        
        /* Responsive design for tablets and mobile */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 24px;
            }
            
            .screen {
                padding: 20px 10px;
            }
            
            h1 {
                font-size: 48px;
            }
            
            h2 {
                font-size: 40px;
            }
            
            .primary-button {
                min-width: 250px;
                font-size: 28px;
            }
            
            .huge-button {
                min-width: 300px;
                font-size: 36px;
                padding: 40px 50px;
            }
            
            .microphone-button {
                width: 300px;
                height: 300px;
                font-size: 90px;
            }
            
            .family-photo {
                width: 120px;
                height: 120px;
            }
            
            .pain-scale {
                gap: 10px;
            }
            
            .pain-button {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .mood-button {
                width: 100px;
                height: 100px;
                font-size: 48px;
            }
            
            .sleep-options {
                flex-direction: column;
                align-items: center;
            }
            
            .quick-responses {
                grid-template-columns: 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            body {
                background: #ffffff;
                color: #000000;
            }
            
            .primary-button,
            .secondary-button,
            .call-button {
                border: 4px solid #000000;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }
        
        /* Focus management for accessibility */
        .screen:focus {
            outline: none;
        }
        
        /* Print styles for emergency information */
        @media print {
            .screen {
                display: block !important;
            }
            
            .emergency-button,
            .back-button {
                display: none;
            }
            
            .medical-info {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Emergency Button - Always Accessible -->
    <button class="emergency-button" onclick="showEmergency()" aria-label="Emergency help">
        🚨 HELP
    </button>

    <!-- Back Button - Navigation -->
    <button class="back-button" id="back-button" onclick="goBack()" aria-label="Go back" style="display: none;">
        ← Back
    </button>

    <!-- SCREEN 1: DAILY WELCOME -->
    <div class="screen active" id="welcome-screen">
        <!-- Date and Weather Header -->
        <div class="header-info" role="banner" aria-label="Today's information">
            <div class="date-time" id="current-datetime">
                Tuesday, August 22, 2025, 2:40 PM
            </div>
            <div class="weather-widget">
                <div class="weather-icon" aria-label="Weather icon">☀️</div>
                <div class="weather-info">
                    <div class="weather-temp">22°C</div>
                    <div class="weather-desc">Sunny and pleasant</div>
                </div>
            </div>
        </div>
        
        <!-- Personal Greeting -->
        <h1>Good afternoon, Margaret!</h1>
        
        <!-- Family Context -->
        <div class="family-context" role="region" aria-label="Family connection">
            <div class="family-photo" aria-label="Sarah's photo">👩</div>
            <p class="large-text">Sarah is thinking of you today</p>
            <p class="medium-text">Your AI health companion is ready to chat</p>
            <button class="call-button" onclick="callFamily()" aria-label="Call Sarah">
                📞 Need help? Call Sarah
            </button>
        </div>
        
        <!-- Daily Health Check Invitation -->
        <div class="large-text" style="margin: 40px 0;">Ready for today's health chat?</div>
        <p class="medium-text">Just like talking to a caring nurse - it only takes 5 minutes</p>
        
        <!-- Main Action -->
        <button class="huge-button" onclick="startHealthChat()" aria-label="Start today's health conversation">
            🎤 Start Today's Chat
        </button>
        
        <!-- Status Indicators -->
        <div class="status-section status-pending" id="daily-status">
            <div class="large-text">Today: Not completed</div>
            <div class="medium-text">Your family will receive a summary tomorrow morning</div>
        </div>
        
        <!-- Navigation to Other Features -->
        <div class="nav-buttons">
            <button class="nav-button" onclick="showFamilyMessages()">💬 Family Messages</button>
            <button class="nav-button" onclick="showSettings()">⚙️ Settings</button>
            <button class="nav-button" onclick="showCelebration()">🎉 This Week</button>
        </div>
    </div>

    <!-- SCREEN 2: VOICE CONVERSATION INTERFACE -->
    <div class="screen" id="conversation-screen">
        <h1>Let's chat about your health</h1>
        
        <!-- AI Companion -->
        <div class="ai-avatar listening" id="ai-avatar" aria-label="HomeBridge AI companion">
            🤖
        </div>
        <h2>HomeBridge</h2>
        
        <!-- AI Status -->
        <div class="ai-status listening" id="ai-status" aria-live="polite">
            🎤 I'm listening...
        </div>
        
        <!-- Conversation Display -->
        <div class="conversation" id="conversation-display" role="log" aria-label="Health conversation">
            <div class="message ai">
                <strong>HomeBridge:</strong> Hello Margaret! How are you feeling today? Are you having any pain or discomfort?
                <div class="message-time">Just now</div>
            </div>
        </div>
        
        <!-- Microphone Interface -->
        <div class="microphone-interface">
            <button class="microphone-button" id="mic-button" onclick="toggleRecording()" 
                    aria-label="Press to speak your answer">
                🎤
            </button>
            <div class="mic-label" id="mic-label">Tap to Talk</div>
            
            <!-- Audio Level Indicator -->
            <div class="audio-level" id="audio-level" aria-hidden="true">
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
            </div>
        </div>
        
        <!-- Conversation Support Options -->
        <div class="nav-buttons">
            <button class="secondary-button" onclick="sayAgain()">🔄 Say that again</button>
            <button class="secondary-button" onclick="typeInstead()">⌨️ Type instead</button>
            <button class="secondary-button" onclick="finishConversation()">✅ I'm finished</button>
            <button class="secondary-button" onclick="needHelp()">❓ I need help</button>
        </div>
        
        <!-- Progress Indicator -->
        <div class="status-section">
            <div class="large-text" id="progress-text">Question 1 of 5 - You're doing great!</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 20%;"></div>
            </div>
        </div>
    </div>

    <!-- SCREEN 3: HEALTH CHECK-IN SPECIFICS -->
    <div class="screen" id="health-checkin-screen">
        <h1>Let's check how you're feeling</h1>
        
        <!-- Pain Assessment -->
        <div class="health-scale">
            <div class="scale-title">Any pain today?</div>
            <p class="medium-text">Tap the number that matches your pain level</p>
            <div class="pain-scale" id="pain-scale">
                <button class="pain-button" data-value="0" onclick="selectPain(0)" aria-label="No pain - 0">0</button>
                <button class="pain-button" data-value="1" onclick="selectPain(1)" aria-label="Mild pain - 1">1</button>
                <button class="pain-button" data-value="2" onclick="selectPain(2)" aria-label="Mild pain - 2">2</button>
                <button class="pain-button" data-value="3" onclick="selectPain(3)" aria-label="Moderate pain - 3">3</button>
                <button class="pain-button" data-value="4" onclick="selectPain(4)" aria-label="Moderate pain - 4">4</button>
                <button class="pain-button" data-value="5" onclick="selectPain(5)" aria-label="Moderate pain - 5">5</button>
                <button class="pain-button" data-value="6" onclick="selectPain(6)" aria-label="Severe pain - 6">6</button>
                <button class="pain-button" data-value="7" onclick="selectPain(7)" aria-label="Severe pain - 7">7</button>
                <button class="pain-button" data-value="8" onclick="selectPain(8)" aria-label="Very severe pain - 8">8</button>
                <button class="pain-button" data-value="9" onclick="selectPain(9)" aria-label="Very severe pain - 9">9</button>
                <button class="pain-button" data-value="10" onclick="selectPain(10)" aria-label="Worst pain - 10">10</button>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                <span class="medium-text">No pain</span>
                <span class="medium-text">Worst pain</span>
            </div>
        </div>
        
        <!-- Mood Assessment -->
        <div class="health-scale">
            <div class="scale-title">How is your mood?</div>
            <p class="medium-text">Tap the face that shows how you feel</p>
            <div class="mood-scale" id="mood-scale">
                <button class="mood-button" data-value="very-sad" onclick="selectMood('very-sad')" aria-label="Very sad">
                    😢
                    <div class="mood-label">Very sad</div>
                </button>
                <button class="mood-button" data-value="sad" onclick="selectMood('sad')" aria-label="Sad">
                    😕
                    <div class="mood-label">Sad</div>
                </button>
                <button class="mood-button" data-value="okay" onclick="selectMood('okay')" aria-label="Okay">
                    😐
                    <div class="mood-label">Okay</div>
                </button>
                <button class="mood-button" data-value="good" onclick="selectMood('good')" aria-label="Good">
                    😊
                    <div class="mood-label">Good</div>
                </button>
                <button class="mood-button" data-value="very-happy" onclick="selectMood('very-happy')" aria-label="Very happy">
                    😄
                    <div class="mood-label">Very happy</div>
                </button>
            </div>
        </div>
        
        <!-- Sleep Quality -->
        <div class="health-scale">
            <div class="scale-title">How did you sleep?</div>
            <p class="medium-text">Choose the option that best describes your sleep</p>
            <div class="sleep-options" id="sleep-options">
                <button class="sleep-button good" data-value="good" onclick="selectSleep('good')" aria-label="Slept well">
                    😴<br><strong>Slept well</strong><br>Good rest, no problems
                </button>
                <button class="sleep-button fair" data-value="fair" onclick="selectSleep('fair')" aria-label="Some trouble sleeping">
                    😪<br><strong>Some trouble</strong><br>Woke up a few times
                </button>
                <button class="sleep-button poor" data-value="poor" onclick="selectSleep('poor')" aria-label="Poor sleep">
                    😵<br><strong>Poor sleep</strong><br>Very restless night
                </button>
            </div>
        </div>
        
        <!-- Energy Level -->
        <div class="health-scale">
            <div class="scale-title">Energy level today?</div>
            <p class="medium-text">Fill the battery to show your energy</p>
            <div class="energy-level" id="energy-level">
                <button class="energy-bar" data-value="1" onclick="selectEnergy(1)" aria-label="Very tired - 1 bar"></button>
                <button class="energy-bar" data-value="2" onclick="selectEnergy(2)" aria-label="Tired - 2 bars"></button>
                <button class="energy-bar" data-value="3" onclick="selectEnergy(3)" aria-label="Okay energy - 3 bars"></button>
                <button class="energy-bar" data-value="4" onclick="selectEnergy(4)" aria-label="Good energy - 4 bars"></button>
                <button class="energy-bar" data-value="5" onclick="selectEnergy(5)" aria-label="Full energy - 5 bars"></button>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                <span class="medium-text">Very tired</span>
                <span class="medium-text">Full of energy</span>
            </div>
        </div>
        
        <!-- Continue Button -->
        <button class="primary-button" onclick="continueToMedication()" aria-label="Continue to medication check">
            ➡️ Continue
        </button>
    </div>

    <!-- SCREEN 4: MEDICATION CHECK -->
    <div class="screen" id="medication-screen">
        <h1>Medication check</h1>
        
        <div class="medication-section">
            <div class="scale-title">Did you take your morning medications?</div>
            
            <div class="medication-list">
                <div class="medication-item">
                    <div class="medication-photo" aria-label="Blood pressure medication">💊</div>
                    <div class="large-text">Blood pressure</div>
                    <div class="medium-text">White round pill</div>
                    <div class="yes-no-buttons">
                        <button class="yes-button" onclick="markMedication('bp', true)" aria-label="Yes, taken">✅ YES</button>
                        <button class="no-button" onclick="markMedication('bp', false)" aria-label="No, not taken">❌ NO</button>
                    </div>
                </div>
                
                <div class="medication-item">
                    <div class="medication-photo" aria-label="Heart medication">❤️</div>
                    <div class="large-text">Heart medication</div>
                    <div class="medium-text">Small blue pill</div>
                    <div class="yes-no-buttons">
                        <button class="yes-button" onclick="markMedication('heart', true)" aria-label="Yes, taken">✅ YES</button>
                        <button class="no-button" onclick="markMedication('heart', false)" aria-label="No, not taken">❌ NO</button>
                    </div>
                </div>
                
                <div class="medication-item">
                    <div class="medication-photo" aria-label="Vitamin D">☀️</div>
                    <div class="large-text">Vitamin D</div>
                    <div class="medium-text">Yellow capsule</div>
                    <div class="yes-no-buttons">
                        <button class="yes-button" onclick="markMedication('vitamin', true)" aria-label="Yes, taken">✅ YES</button>
                        <button class="no-button" onclick="markMedication('vitamin', false)" aria-label="No, not taken">❌ NO</button>
                    </div>
                </div>
            </div>
            
            <button class="secondary-button" onclick="setReminder()" aria-label="Set reminder for later">
                ⏰ Set reminder for later
            </button>
        </div>
        
        <button class="primary-button" onclick="finishHealthCheck()" aria-label="Finish health check">
            ✅ Finish Health Check
        </button>
    </div>

    <!-- SCREEN 5: FAMILY MESSAGES -->
    <div class="screen" id="family-messages-screen">
        <h1>Messages from your family</h1>
        
        <div class="family-messages">
            <div class="message-list">
                <!-- Family Message 1 -->
                <div class="family-message">
                    <div class="message-photo" aria-label="Sarah's photo">👩</div>
                    <div class="message-content">
                        <div class="message-from">Sarah (Daughter)</div>
                        <div class="message-text">Hi Mum! Hope you're having a lovely day. The grandkids are excited to see you this weekend!</div>
                        <button class="voice-message-button" onclick="playVoiceMessage(1)" aria-label="Play voice message">
                            🔊 Play voice message
                        </button>
                    </div>
                </div>
                
                <!-- Family Message 2 -->
                <div class="family-message">
                    <div class="message-photo" aria-label="Tom's photo">👨</div>
                    <div class="message-content">
                        <div class="message-from">Tom (Son)</div>
                        <div class="message-text">Thanks for the birthday card, Mum! It arrived yesterday and made my day. Love you!</div>
                    </div>
                </div>
                
                <!-- Grandchildren Photo -->
                <div class="family-message">
                    <div class="message-photo" aria-label="Emma's photo">👧</div>
                    <div class="message-content">
                        <div class="message-from">Emma (Granddaughter)</div>
                        <div class="message-text">Look at my new drawing! 🎨</div>
                        <div style="background: #f3f4f6; padding: 20px; border-radius: 12px; margin-top: 10px;">
                            <div style="font-size: 64px; text-align: center;">🖼️</div>
                            <div class="medium-text" style="text-align: center;">Family drawing</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quick Response Templates -->
        <div class="health-scale">
            <div class="scale-title">Send a quick reply</div>
            <div class="quick-responses">
                <button class="quick-response" onclick="sendQuickResponse('love')" aria-label="Send love message">
                    ❤️ I love you all!
                </button>
                <button class="quick-response" onclick="sendQuickResponse('well')" aria-label="Send wellness update">
                    😊 I'm doing well!
                </button>
                <button class="quick-response" onclick="sendQuickResponse('thanks')" aria-label="Send thank you">
                    🙏 Thank you for thinking of me
                </button>
                <button class="quick-response" onclick="sendQuickResponse('call')" aria-label="Request call">
                    📞 Please call me when you can
                </button>
            </div>
            
            <button class="primary-button" onclick="recordVoiceReply()" aria-label="Record voice message">
                🎤 Record voice message
            </button>
        </div>
    </div>

    <!-- SCREEN 6: EMERGENCY HELP -->
    <div class="screen" id="emergency-screen">
        <div class="emergency-screen">
            <div class="emergency-title">🚨 EMERGENCY HELP</div>
            
            <div class="emergency-actions">
                <button class="emergency-call-button" onclick="callEmergencyServices()" aria-label="Call emergency services">
                    🚨 Call Emergency Services
                </button>
                
                <button class="emergency-call-button family" onclick="callFamily()" aria-label="Call Sarah immediately">
                    📞 Call Sarah (Daughter)
                </button>
                
                <button class="emergency-call-button family" onclick="callSecondaryFamily()" aria-label="Call Tom">
                    📞 Call Tom (Son)
                </button>
                
                <button class="secondary-button" onclick="shareLocation()" aria-label="Share location">
                    📍 Share my location
                </button>
            </div>
            
            <!-- Medical Information Display -->
            <div class="medical-info">
                <h3>📋 Medical Information</h3>
                <ul>
                    <li><strong>Medications:</strong> Blood pressure (Amlodipine 5mg), Heart (Metoprolol 25mg), Vitamin D</li>
                    <li><strong>Allergies:</strong> Penicillin</li>
                    <li><strong>Medical Conditions:</strong> High blood pressure, Mild heart condition</li>
                    <li><strong>Doctor:</strong> Dr. Smith - 01234-567-890</li>
                    <li><strong>Emergency Contact:</strong> Sarah Johnson - 07700-123-456</li>
                </ul>
                <button class="secondary-button" onclick="readMedicalInfo()" aria-label="Read medical information aloud">
                    🔊 Read this information aloud
                </button>
            </div>
            
            <!-- Quick Medical Questions -->
            <div class="health-scale">
                <div class="scale-title">Quick questions</div>
                <div class="yes-no-buttons">
                    <div style="margin: 20px 0;">
                        <div class="large-text">Are you hurt?</div>
                        <button class="yes-button" onclick="reportCondition('hurt', true)">YES</button>
                        <button class="no-button" onclick="reportCondition('hurt', false)">NO</button>
                    </div>
                    <div style="margin: 20px 0;">
                        <div class="large-text">Having chest pain?</div>
                        <button class="yes-button" onclick="reportCondition('chest', true)">YES</button>
                        <button class="no-button" onclick="reportCondition('chest', false)">NO</button>
                    </div>
                    <div style="margin: 20px 0;">
                        <div class="large-text">Trouble breathing?</div>
                        <button class="yes-button" onclick="reportCondition('breathing', true)">YES</button>
                        <button class="no-button" onclick="reportCondition('breathing', false)">NO</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 7: SETTINGS -->
    <div class="screen" id="settings-screen">
        <h1>Settings</h1>
        
        <!-- Volume Controls -->
        <div class="settings-section">
            <div class="scale-title">🔊 Volume Control</div>
            <div class="volume-control">
                <button class="volume-button" onclick="changeVolume(-1)" aria-label="Decrease volume">−</button>
                <div class="volume-display" id="volume-display">7</div>
                <button class="volume-button" onclick="changeVolume(1)" aria-label="Increase volume">+</button>
            </div>
            <button class="secondary-button" onclick="testVolume()" aria-label="Test volume level">
                🔊 Test volume level
            </button>
        </div>
        
        <!-- Text Size Adjustment -->
        <div class="settings-section">
            <div class="scale-title">📖 Text Size</div>
            <div class="text-size-options">
                <button class="text-size-button" onclick="setTextSize('large')" aria-label="Large text">
                    <div style="font-size: 28px; font-weight: bold;">Large text</div>
                    <div class="text-size-preview" style="font-size: 28px;">Sample text</div>
                </button>
                <button class="text-size-button selected" onclick="setTextSize('extra-large')" aria-label="Extra large text">
                    <div style="font-size: 32px; font-weight: bold;">Extra large text</div>
                    <div class="text-size-preview" style="font-size: 32px;">Sample text</div>
                </button>
                <button class="text-size-button" onclick="setTextSize('huge')" aria-label="Huge text">
                    <div style="font-size: 36px; font-weight: bold;">Huge text</div>
                    <div class="text-size-preview" style="font-size: 36px;">Sample text</div>
                </button>
            </div>
        </div>
        
        <!-- Family Contact Management -->
        <div class="settings-section">
            <div class="scale-title">👥 Family Contacts</div>
            <div class="family-context">
                <div class="family-photo">👩</div>
                <div class="large-text">Sarah Johnson (Daughter)</div>
                <div class="medium-text">Main contact: 07700-123-456</div>
                <button class="call-button" onclick="testFamilyCall()" aria-label="Test call to Sarah">
                    📞 Test call to Sarah
                </button>
            </div>
            <button class="secondary-button" onclick="getFamilyHelp()" aria-label="Get help from family with settings">
                ❓ Get help from family with settings
            </button>
        </div>
    </div>

    <!-- SCREEN 8: WEEKLY CELEBRATION -->
    <div class="screen" id="celebration-screen">
        <div class="celebration-screen">
            <div class="celebration-icon">🎉</div>
            <h1>Great Week, Margaret!</h1>
            <p class="large-text">Your family is proud of you!</p>
            
            <!-- Achievement Grid -->
            <div class="achievement-grid">
                <div class="achievement-card">
                    <div class="achievement-icon">📅</div>
                    <div class="achievement-text">7 days of health check-ins completed!</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                </div>
                
                <div class="achievement-card">
                    <div class="achievement-icon">😊</div>
                    <div class="achievement-text">Your mood improved this week!</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%;"></div>
                    </div>
                </div>
                
                <div class="achievement-card">
                    <div class="achievement-icon">👥</div>
                    <div class="achievement-text">Connected with family 5 times</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                </div>
                
                <div class="achievement-card">
                    <div class="achievement-icon">💊</div>
                    <div class="achievement-text">Took medications on time 6 days</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 90%;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Family Pride Messages -->
            <div class="family-context">
                <div class="family-photo">👩</div>
                <div class="large-text">"Mum, you're doing amazing! We're so proud of your healthy habits." - Sarah</div>
                <button class="call-button" onclick="playFamilyMessage()" aria-label="Play message from family">
                    🔊 Play message from Sarah
                </button>
            </div>
            
            <!-- Next Week Encouragement -->
            <div class="large-text">Ready for another healthy week?</div>
            <p class="medium-text">Your family will see your progress and cheer you on!</p>
            
            <button class="primary-button" onclick="startNewWeek()" aria-label="Continue your health journey">
                🌟 Continue your great health journey
            </button>
        </div>
    </div>

    <script>
        // ENHANCED JAVASCRIPT FOR ELDERLY DAILY APPLICATION
        
        // Global variables for app state
        let currentScreen = 0;
        let isRecording = false;
        let recognition;
        let currentConversationStep = 0;
        let healthData = {
            pain: null,
            mood: null,
            sleep: null,
            energy: null,
            medications: {}
        };
        let volume = 7;
        let textSize = 'extra-large';
        
        // Family information
        const familyInfo = {
            primary: {
                name: 'Sarah',
                relationship: 'Daughter',
                phone: '07700-123-456'
            },
            secondary: {
                name: 'Tom',
                relationship: 'Son', 
                phone: '07700-654-321'
            }
        };
        
        // Screen management with accessibility
        const screens = [
            'welcome-screen',
            'conversation-screen', 
            'health-checkin-screen',
            'medication-screen',
            'family-messages-screen',
            'emergency-screen',
            'settings-screen',
            'celebration-screen'
        ];
        
        function showScreen(screenIndex) {
            screens.forEach((screen, index) => {
                const element = document.getElementById(screen);
                if (index === screenIndex) {
                    element.classList.add('active');
                    element.focus();
                    element.scrollTop = 0;
                } else {
                    element.classList.remove('active');
                }
            });
            
            currentScreen = screenIndex;
            
            // Show/hide back button
            const backButton = document.getElementById('back-button');
            if (screenIndex === 0) {
                backButton.style.display = 'none';
            } else {
                backButton.style.display = 'block';
            }
            
            announceForScreenReader(`Now showing ${getScreenName(screenIndex)}`);
        }
        
        function getScreenName(index) {
            const names = [
                'Welcome Home',
                'Health Conversation', 
                'Health Check-in',
                'Medication Check',
                'Family Messages',
                'Emergency Help',
                'Settings',
                'Weekly Celebration'
            ];
            return names[index] || 'Unknown';
        }
        
        function goBack() {
            if (currentScreen > 0) {
                showScreen(0); // Always go back to home
            }
        }
        
        // Enhanced screen reader and audio support
        function announceForScreenReader(message) {
            console.log('Announcement:', message);
            
            // Update ARIA live region if it exists
            const announcement = document.getElementById('announcement');
            if (announcement) {
                announcement.textContent = message;
            }
            
            // Use speech synthesis with elderly-friendly settings
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel(); // Cancel any ongoing speech
                const utterance = new SpeechSynthesisUtterance(message);
                utterance.rate = 0.7; // Slower for elderly users
                utterance.volume = volume / 10;
                utterance.pitch = 1.0;
                speechSynthesis.speak(utterance);
            }
        }
        
        function speakText(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.7;
                utterance.volume = volume / 10;
                speechSynthesis.speak(utterance);
            }
        }
        
        // SCREEN 1: Welcome functions
        function startHealthChat() {
            announceForScreenReader('Starting your daily health conversation.');
            showScreen(1);
            initializeVoiceRecognition();
        }
        
        function showFamilyMessages() {
            announceForScreenReader('Opening family messages.');
            showScreen(4);
        }
        
        function showSettings() {
            announceForScreenReader('Opening settings.');
            showScreen(6);
        }
        
        function showCelebration() {
            announceForScreenReader('Opening weekly celebration.');
            showScreen(7);
        }
        
        function showEmergency() {
            announceForScreenReader('Opening emergency help. Emergency contacts are ready.');
            showScreen(5);
        }
        
        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit'
            };
            const dateTimeElement = document.getElementById('current-datetime');
            if (dateTimeElement) {
                dateTimeElement.textContent = now.toLocaleDateString('en-GB', options);
            }
        }
        
        // SCREEN 2: Voice conversation functions
        function initializeVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-GB';
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    handleUserResponse(transcript);
                };
                
                recognition.onerror = function(event) {
                    announceForScreenReader('Sorry, I didn\'t catch that. Please try again or tap "Say that again".');
                    stopRecording();
                };
                
                recognition.onend = function() {
                    stopRecording();
                };
            } else {
                announceForScreenReader('Voice recognition is not available. Please use the type instead option.');
            }
        }
        
        function toggleRecording() {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        }
        
        function startRecording() {
            if (recognition) {
                isRecording = true;
                const micButton = document.getElementById('mic-button');
                const micLabel = document.getElementById('mic-label');
                const aiAvatar = document.getElementById('ai-avatar');
                const aiStatus = document.getElementById('ai-status');
                
                micButton.classList.add('recording');
                micLabel.textContent = 'Recording... Speak now';
                aiAvatar.className = 'ai-avatar listening';
                aiStatus.className = 'ai-status listening';
                aiStatus.textContent = '🎤 I\'m listening...';
                
                activateAudioLevel();
                recognition.start();
                
                announceForScreenReader('Recording started. Speak clearly.');
                
                // Auto-stop after 15 seconds for elderly users
                setTimeout(() => {
                    if (isRecording) {
                        stopRecording();
                    }
                }, 15000);
            }
        }
        
        function stopRecording() {
            if (recognition && isRecording) {
                isRecording = false;
                const micButton = document.getElementById('mic-button');
                const micLabel = document.getElementById('mic-label');
                const aiAvatar = document.getElementById('ai-avatar');
                const aiStatus = document.getElementById('ai-status');
                
                micButton.classList.remove('recording');
                micButton.classList.add('processing');
                micLabel.textContent = 'Processing...';
                aiAvatar.className = 'ai-avatar thinking';
                aiStatus.className = 'ai-status thinking';
                aiStatus.textContent = '🤔 Let me think about that...';
                
                deactivateAudioLevel();
                recognition.stop();
                
                // Reset button after processing
                setTimeout(() => {
                    micButton.classList.remove('processing');
                    micLabel.textContent = 'Tap to Talk';
                }, 2000);
            }
        }
        
        function activateAudioLevel() {
            const bars = document.querySelectorAll('.audio-bar');
            bars.forEach((bar, index) => {
                setTimeout(() => {
                    bar.classList.add('active');
                }, index * 150);
            });
        }
        
        function deactivateAudioLevel() {
            const bars = document.querySelectorAll('.audio-bar');
            bars.forEach(bar => {
                bar.classList.remove('active');
            });
        }
        
        function handleUserResponse(transcript) {
            // Add user message to conversation
            addMessageToConversation('user', transcript);
            
            // Update AI status
            const aiAvatar = document.getElementById('ai-avatar');
            const aiStatus = document.getElementById('ai-status');
            aiAvatar.className = 'ai-avatar speaking';
            aiStatus.className = 'ai-status speaking';
            aiStatus.textContent = '🗣️ HomeBridge is responding...';
            
            // Generate AI response
            setTimeout(() => {
                let aiResponse = generateAIResponse(currentConversationStep, transcript);
                addMessageToConversation('ai', aiResponse);
                speakText(aiResponse);
                
                currentConversationStep++;
                updateProgress();
                
                // Move to health check-in after 3 conversation exchanges
                if (currentConversationStep >= 3) {
                    setTimeout(() => {
                        announceForScreenReader('Great conversation! Now let\'s do a quick health check.');
                        showScreen(2);
                    }, 3000);
                } else {
                    // Reset AI status
                    setTimeout(() => {
                        aiAvatar.className = 'ai-avatar listening';
                        aiStatus.className = 'ai-status listening';
                        aiStatus.textContent = '🎤 I\'m listening...';
                    }, 2000);
                }
            }, 1500);
        }
        
        function addMessageToConversation(sender, message) {
            const conversation = document.getElementById('conversation-display');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-GB', { 
                hour: 'numeric', 
                minute: '2-digit' 
            });
            
            if (sender === 'ai') {
                messageDiv.innerHTML = `
                    <strong>HomeBridge:</strong> ${message}
                    <div class="message-time">${timeString}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <strong>You:</strong> ${message}
                    <div class="message-time">${timeString}</div>
                `;
            }
            
            conversation.appendChild(messageDiv);
            messageDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateAIResponse(step, userInput) {
            const responses = [
                "Thank you for sharing that with me. How has your sleep been lately? Are you getting good rest at night?",
                "That's good to know. Have you been taking your medications as prescribed? Any issues with remembering them?",
                "Excellent! You're doing really well with your health care. Sarah will be happy to hear you're taking good care of yourself."
            ];
            return responses[step] || "Thank you for talking with me today, Margaret!";
        }
        
        function updateProgress() {
            const progressText = document.getElementById('progress-text');
            const progressFill = document.getElementById('progress-fill');
            
            const step = currentConversationStep + 1;
            const percentage = (step / 5) * 100;
            
            progressText.textContent = `Question ${step} of 5 - You're doing great!`;
            progressFill.style.width = `${percentage}%`;
        }
        
        function sayAgain() {
            announceForScreenReader('Let\'s try that again. Press the microphone button and speak clearly.');
        }
        
        function typeInstead() {
            announceForScreenReader('Switching to typing mode.');
            // In a real implementation, this would show a large text input
            const response = prompt('Please type your response:');
            if (response) {
                handleUserResponse(response);
            }
        }
        
        function finishConversation() {
            announceForScreenReader('Thank you for the conversation. Moving to health check.');
            showScreen(2);
        }
        
        function needHelp() {
            announceForScreenReader('Getting help from family.');
            callFamily();
        }
        
        // SCREEN 3: Health check-in functions
        function selectPain(value) {
            healthData.pain = value;
            
            // Update visual selection
            document.querySelectorAll('.pain-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-value="${value}"]`).classList.add('selected');
            
            const painLevel = value === 0 ? 'no pain' : value <= 3 ? 'mild pain' : value <= 6 ? 'moderate pain' : 'severe pain';
            announceForScreenReader(`Selected ${value} out of 10, ${painLevel}.`);
        }
        
        function selectMood(value) {
            healthData.mood = value;
            
            // Update visual selection
            document.querySelectorAll('.mood-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-value="${value}"]`).classList.add('selected');
            
            announceForScreenReader(`Selected mood: ${value.replace('-', ' ')}.`);
        }
        
        function selectSleep(value) {
            healthData.sleep = value;
            
            // Update visual selection
            document.querySelectorAll('.sleep-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[data-value="${value}"]`).classList.add('selected');
            
            const sleepDescription = value === 'good' ? 'slept well' : value === 'fair' ? 'some trouble sleeping' : 'poor sleep';
            announceForScreenReader(`Selected: ${sleepDescription}.`);
        }
        
        function selectEnergy(value) {
            healthData.energy = value;
            
            // Update energy bar display
            document.querySelectorAll('.energy-bar').forEach((bar, index) => {
                bar.classList.remove('filled', 'selected');
                if (index < value) {
                    bar.classList.add('filled');
                }
                if (index === value - 1) {
                    bar.classList.add('selected');
                }
            });
            
            const energyLevel = value <= 2 ? 'tired' : value <= 3 ? 'okay energy' : value <= 4 ? 'good energy' : 'full of energy';
            announceForScreenReader(`Selected energy level: ${energyLevel}, ${value} out of 5.`);
        }
        
        function continueToMedication() {
            if (!healthData.pain && !healthData.mood && !healthData.sleep && !healthData.energy) {
                announceForScreenReader('Please answer at least one question before continuing.');
                return;
            }
            
            announceForScreenReader('Moving to medication check.');
            showScreen(3);
        }
        
        // SCREEN 4: Medication functions
        function markMedication(medicationType, taken) {
            healthData.medications[medicationType] = taken;
            
            const status = taken ? 'taken' : 'not taken';
            const medicationNames = {
                'bp': 'blood pressure medication',
                'heart': 'heart medication', 
                'vitamin': 'vitamin D'
            };
            
            announceForScreenReader(`Marked ${medicationNames[medicationType]} as ${status}.`);
            
            // Visual feedback
            const medicationItem = document.querySelector(`[onclick*="${medicationType}"]`).closest('.medication-item');
            if (taken) {
                medicationItem.style.backgroundColor = '#dcfce7';
                medicationItem.style.borderColor = '#00aa00';
            } else {
                medicationItem.style.backgroundColor = '#fee2e2';
                medicationItem.style.borderColor = '#cc0000';
            }
        }
        
        function setReminder() {
            announceForScreenReader('Setting reminder for later. Your family will be notified if medications are missed.');
            // In real implementation, this would set up notifications
            alert('Reminder set for 2 hours from now.');
        }
        
        function finishHealthCheck() {
            announceForScreenReader('Health check completed! Thank you for taking care of yourself.');
            
            // Update daily status
            const dailyStatus = document.getElementById('daily-status');
            if (dailyStatus) {
                dailyStatus.className = 'status-section status-completed';
                dailyStatus.innerHTML = `
                    <div class="large-text">Today: ✅ Completed at ${new Date().toLocaleTimeString('en-GB', {hour: 'numeric', minute: '2-digit'})}</div>
                    <div class="medium-text">Great job! Your family will receive a summary tomorrow morning</div>
                `;
            }
            
            showScreen(0); // Return to home
        }
        
        // SCREEN 5: Family messages functions
        function playVoiceMessage(messageId) {
            announceForScreenReader('Playing voice message from Sarah.');
            speakText('Hi Mum! Hope you\'re having a lovely day. The grandkids are excited to see you this weekend!');
        }
        
        function sendQuickResponse(type) {
            const responses = {
                'love': 'I love you all!',
                'well': 'I\'m doing well, thank you for asking!',
                'thanks': 'Thank you for thinking of me',
                'call': 'Please call me when you can'
            };
            
            const message = responses[type];
            announceForScreenReader(`Sending message: ${message}`);
            
            // Visual feedback
            alert(`Message sent: "${message}"`);
        }
        
        function recordVoiceReply() {
            announceForScreenReader('Recording voice message for family. Press the microphone when ready.');
            // In real implementation, this would record and send voice message
        }
        
        // SCREEN 6: Emergency functions
        function callEmergencyServices() {
            announceForScreenReader('Calling emergency services immediately.');
            // Auto-share location and medical information
            shareLocation();
            window.location.href = 'tel:999';
        }
        
        function callFamily() {
            announceForScreenReader(`Calling ${familyInfo.primary.name} immediately.`);
            window.location.href = `tel:${familyInfo.primary.phone}`;
        }
        
        function callSecondaryFamily() {
            announceForScreenReader(`Calling ${familyInfo.secondary.name}.`);
            window.location.href = `tel:${familyInfo.secondary.phone}`;
        }
        
        function shareLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    announceForScreenReader('Location shared with emergency contacts.');
                    console.log('Location:', position.coords.latitude, position.coords.longitude);
                }, function() {
                    announceForScreenReader('Unable to get location, but emergency call proceeding.');
                });
            }
        }
        
        function readMedicalInfo() {
            const medicalText = 'Current medications: Blood pressure Amlodipine 5 milligrams, Heart Metoprolol 25 milligrams, Vitamin D. Allergies: Penicillin. Medical conditions: High blood pressure, Mild heart condition. Doctor: Doctor Smith. Emergency contact: Sarah Johnson.';
            speakText(medicalText);
        }
        
        function reportCondition(condition, hasCondition) {
            const conditionText = hasCondition ? `Yes, having ${condition} problems` : `No ${condition} problems`;
            announceForScreenReader(`Reported: ${conditionText}. This information is being shared with emergency contacts.`);
            
            if (hasCondition) {
                // Auto-escalate serious conditions
                if (condition === 'chest' || condition === 'breathing') {
                    setTimeout(() => {
                        announceForScreenReader('Serious condition detected. Calling emergency services.');
                        callEmergencyServices();
                    }, 2000);
                }
            }
        }
        
        // SCREEN 7: Settings functions
        function changeVolume(delta) {
            volume = Math.max(1, Math.min(10, volume + delta));
            document.getElementById('volume-display').textContent = volume;
            announceForScreenReader(`Volume set to ${volume} out of 10.`);
        }
        
        function testVolume() {
            speakText('This is a volume test. If you can hear this clearly, the volume is set correctly.');
        }
        
        function setTextSize(size) {
            textSize = size;
            
            // Update visual selection
            document.querySelectorAll('.text-size-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector(`[onclick*="${size}"]`).classList.add('selected');
            
            announceForScreenReader(`Text size set to ${size.replace('-', ' ')}.`);
            
            // In real implementation, this would update all text sizes
        }
        
        function testFamilyCall() {
            announceForScreenReader('Testing call to Sarah. This will make a real phone call.');
            if (confirm('This will call Sarah. Continue?')) {
                callFamily();
            }
        }
        
        function getFamilyHelp() {
            announceForScreenReader('Contacting family for help with settings.');
            callFamily();
        }
        
        // SCREEN 8: Celebration functions
        function playFamilyMessage() {
            speakText('Mum, you\'re doing amazing! We\'re so proud of your healthy habits. Keep up the great work! Love, Sarah.');
        }
        
        function startNewWeek() {
            announceForScreenReader('Starting a new healthy week! You\'re doing great.');
            showScreen(0);
        }
        
        // Keyboard navigation and accessibility
        document.addEventListener('keydown', function(event) {
            // Space bar activates focused button
            if (event.code === 'Space' && event.target.tagName === 'BUTTON') {
                event.preventDefault();
                event.target.click();
            }
            
            // Enter key for main actions
            if (event.code === 'Enter') {
                if (currentScreen === 1 && !isRecording) {
                    toggleRecording();
                }
            }
            
            // Escape key for emergency
            if (event.code === 'Escape') {
                event.preventDefault();
                showEmergency();
            }
            
            // Number keys for quick selection on health check screen
            if (currentScreen === 2 && event.code.startsWith('Digit')) {
                const number = parseInt(event.code.replace('Digit', ''));
                if (number >= 0 && number <= 10) {
                    selectPain(number);
                }
            }
        });
        
        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            
            announceForScreenReader('Welcome to HomeBridge! Your daily health companion is ready.');
            
            // Set focus to main screen
            document.getElementById('welcome-screen').focus();
            
            // Initialize speech synthesis
            if ('speechSynthesis' in window) {
                speechSynthesis.getVoices(); // Trigger voice loading
            }
        });
        
        // Handle page visibility changes
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && isRecording) {
                stopRecording();
            }
        });
        
        // Error handling with elderly-friendly messages
        window.addEventListener('error', function(event) {
            announceForScreenReader('Something went wrong. Please call Sarah for help or try again.');
            console.error('Error:', event.error);
        });
        
        // Battery warning for mobile devices
        if ('getBattery' in navigator) {
            navigator.getBattery().then(function(battery) {
                if (battery.level < 0.15) {
                    announceForScreenReader('Your device battery is getting low. Please charge it soon.');
                }
                
                battery.addEventListener('levelchange', function() {
                    if (this.level < 0.1) {
                        announceForScreenReader('Battery very low! Please charge your device immediately.');
                    }
                });
            });
        }
        
        // Prevent accidental gestures on mobile
        let startX, startY;
        document.addEventListener('touchstart', function(event) {
            startX = event.touches[0].clientX;
            startY = event.touches[0].clientY;
        });
        
        document.addEventListener('touchend', function(event) {
            const endX = event.changedTouches[0].clientX;
            const endY = event.changedTouches[0].clientY;
            const diffX = Math.abs(endX - startX);
            const diffY = Math.abs(endY - startY);
            
            // Prevent accidental swipes
            if (diffX > 100 || diffY > 100) {
                event.preventDefault();
            }
        });
        
        // Connection status monitoring
        window.addEventListener('online', function() {
            announceForScreenReader('Internet connection restored.');
        });
        
        window.addEventListener('offline', function() {
            announceForScreenReader('Internet connection lost. Emergency features still work.');
        });
    </script>
    
    <!-- ARIA live region for announcements -->
    <div id="announcement" aria-live="polite" style="position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden;"></div>
</body>
</html>